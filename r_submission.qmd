---
title: "ã€ŒRã§åŒ»è–¬å“æ‰¿èªç”³è«‹ã€<br/>ã‚’èª¿ã¹ãŸ"
author: "nissinbo"
date: 2023-03-04
execute:
  eval: false
  echo: true
format:
  revealjs:
    theme: night
    center: true
    slide-number: true
    preview-links: auto
    logo: https://pbs.twimg.com/profile_images/1353348964343455744/6-bevjZq_400x400.jpg
    footer: "Tokyo.R#104"
    self-contained: true
    reference-location: document
lang: ja
---

## [@nissinbo_](https://twitter.com/nissinbo_)

:::: {.columns}
::: {.column width="35%"}

![](https://pbs.twimg.com/profile_images/1353348964343455744/6-bevjZq_400x400.jpg)

:::
::: {.column width="65%"}

- è£½è–¬ä¼æ¥­ã§åŒ»ç™‚ãƒ‡ãƒ¼ã‚¿åˆ†æ
- äººç”Ÿåˆã®`read.csv()`ã‹ã‚‰4å¹´
- å¥½ããªåˆ†é‡ï¼šè–¬å‰¤ç–«å­¦ã€åŒ»ç™‚æƒ…å ±å­¦
- å°†æ¥ã®å¤¢ã€€ï¼šå¤æ°‘å®¶ã‚«ãƒ•ã‚§ã‚’ã²ã‚‰ã

:::
::::

## Disclaimer

- å€‹äººã®è¦‹è§£ã§ã™
- ãƒã‚µã‚«ãƒªãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™

# åŒ»è–¬å“ã®ãŠã¯ãªã—

## è£½è–¬ä¼æ¥­ãŒåŒ»è–¬å“ã®æ‰¿èªã‚’å¾—ã‚‹ã«ã¯

- å„å›½ã®è¦åˆ¶å½“å±€ã«ç”³è«‹ã‚’è¡Œã„ã€èªå¯ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹
    - æ—¥æœ¬ã¯PMDAã€ç±³å›½ã¯FDAã€æ¬§å·ã¯EMEA
- ç”³è«‹è³‡æ–™ã®ä¸»å½¹ã¯ã€ãƒ’ãƒˆå¯¾è±¡ã®**è‡¨åºŠè©¦é¨“(â‰’æ²»é¨“)ã®çµæœ**

## ç”³è«‹è³‡æ–™ä½œæˆã®ã“ã‚Œã¾ã§

- SASè¨€èªä¸€æŠï¼
    - è©³ã—ã„çµŒç·¯ã¯ã‚ã‹ã‚Šã¾ã›ã‚“
    - è‡¨åºŠè©¦é¨“ã§ä½¿ã‚ã‚Œã‚‹è§£æã¯ãŸã„ã¦ã„å®Ÿè¡Œå¯èƒ½
    - æ˜”ã‹ã‚‰ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‹ã‚‰ (ã‚³ãƒ­ãƒ³ãƒ–ã‚¹ã®åµ?)
    - SASç¤¾ãŒã€Œæ­£ã—ã„ã€ã¨è¨€ã£ãŸã‚‰ã™ã¹ã¦ä¿¡é ¼ã™ã‚‹?
    - ãƒã‚°ã§é–“é•ã£ãŸçµæœãŒå‡ºãŸã‚‰SASç¤¾ã‹ã‚‰è£œå„Ÿã•ã‚Œã‚‹ã®?
- CDISCã‚„ã€Excel/Wordã§ã®å‡ºåŠ›ãªã©ã€è¦æ ¼ã¸ã®é©åˆãŒå¿…è¦

## èª°ã‚‚SASå¿…é ˆã¨ã¯è¨€ã£ã¦ãªã„

- [FDA: Statistical Software Clarifying Statement](https://www.fda.gov/media/161196/download)

```
FDA does not require use of any specific software for statistical analyses, and statistical software is not explicitly discussed in Title 21 of the Code of Federal Regulations [e.g., in 21CFR part 11]. However, the software package(s) used for statistical analyses should be fully documented in the submission, including version and build identification.
```

# ã˜ã‚ƒã€Rä½¿ã£ã¦ã‚‚ã„ã„!?

## æ‰¿èªç”³è«‹ã§Rã‚’ä½¿ã†å‹•æ©Ÿ

- OSSã§ã‚ã‚‹
    - ç„¡æ–™ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å†…éƒ¨æ¤œè¨¼ãŒå¯èƒ½
- æ§˜ã€…ãªçµ±è¨ˆæ‰‹æ³•ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒä½¿ãˆã‚‹
    - [`gsDesign`](https://github.com/keaven/gsDesign), [`simtrial`](https://github.com/Merck/simtrial): ç¾¤é€æ¬¡ãƒ‡ã‚¶ã‚¤ãƒ³
    - Stanã§MCMC
- ã„ã„æ„Ÿã˜ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
    - [`gtsummary`](https://www.danieldsjoberg.com/gtsummary/), [`ggconsort`](https://nissinbo.github.io/ggconsort_introduction/)
- ã„ã„æ„Ÿã˜ã®ãƒ¬ãƒãƒ¼ãƒ†ã‚£ãƒ³ã‚°
    - ç·æ‹¬å ±å‘Šæ›¸(CSR)ä½œæˆã®è‡ªå‹•åŒ–

## æ‰¿èªç”³è«‹ã§Rã‚’ä½¿ã†éš›ã®èª²é¡Œ

- Computerized System Validation (CSV)
    - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®"æ­£ç¢ºã•"ã‚’è©•ä¾¡ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
    - ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ•°ãªã©ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚‚å¤§äº‹ã‚‰ã—ã„
    - [R Validation Hub](https://www.pharmar.org/)ã‚„[å¤–è³‡è£½è–¬](https://www.pharmar.org/casestudies/)ã§è­°è«–ä¸­
- è¦æ ¼ã¸ã®é©åˆ
    - [Pharmaverse](https://pharmaverse.org/), [Atorusç¤¾](https://github.com/atorus-research)ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–‹ç™ºãŒé€²è¡Œ
        - [admiral](https://github.com/pharmaverse/admiral), [xportr](https://github.com/atorus-research/xportr): CDISCå‘¨ã‚Š
        - [rtables](https://github.com/Roche/rtables), [visR](https://github.com/openpharma/visR), [Tplyr](https://github.com/atorus-research/Tplyr), [pharmaRTF](https://github.com/atorus-research/pharmaRTF): eCTDå‡ºåŠ›ã€Wordå½¢å¼ã®TLFå‡ºåŠ›

# ã€ŒRã§ç”³è«‹ã€<br/>ã‚’ã‚„ã£ã¦ã¿ãŸäººãŸã¡

## R Consortium pilot submission

- Rã§è‡¨åºŠè©¦é¨“ãƒ‡ãƒ¼ã‚¿ãƒ»è§£æã‚’FDAã«ç”³è«‹ã™ã‚‹è¦‹æœ¬ä¾‹
    - R Consortiumã¨ã„ã†ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒä¸»å°
    - å®Ÿéš›ã«FDAã®æ‹…å½“è€…ãŒç¢ºèª
    - ãƒ‡ãƒ¼ã‚¿, ã‚³ãƒ¼ãƒ‰, è³‡æ–™ã¯GitHubç­‰ã§å…¬é–‹
- [æ¦‚è¦](https://rconsortium.github.io/submissions-wg/pilot-overall.html)
    - [ç¬¬1å¼¾](https://github.com/RConsortium/submissions-pilot1)ã¯2022å¹´3æœˆã«å®Œäº†ã€[ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸](https://rconsortium.github.io/submissions-pilot1/)åŒ–
    - [ç¬¬2å¼¾](https://github.com/RConsortium/submissions-pilot2)ã¯2022å¹´12æœˆã«å®Œäº†ã€[Shiny](https://rconsortium.shinyapps.io/submissions-pilot2/)åŒ–
    - [ç¬¬3å¼¾](https://github.com/RConsortium/submissions-pilot3)ã¯ã“ã‚Œã‹ã‚‰ï¼

## pilotç¬¬1å¼¾ã§ä½¿ã‚ã‚ŒãŸæŠ€è¡“

- Rè‡ªä½“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¯å¤šåˆ†Docker
    - rocker/tidyverse:4.1.2ã§ã„ã‘ãŸ
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†
    - MRAN: ç‰¹å®šæ—¥ã®snapshotã‚’å†ç¾ã—ãŸã„ã‹ã‚‰?
    - `renv`
    - `pkglite`: è‡ªç¤¾é–‹ç™ºãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’.txtã‹ã‚‰install
- ãã®ä»–ç‰¹å¾´çš„ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
    - `haven`, `huxtable`, `pharmaRTF`, `r2rtf`, `Tplyr`, `visR`, `rtables`

## pilotç¬¬1å¼¾ã®å†ç¾ãƒ¡ãƒ¢

### Dockerèµ·å‹•

```
docker run -e PASSWORD=rstudio --rm -p 8787:8787 rocker/tidyverse:4.1.2
```

- localhost:8787 ã«ã‚¢ã‚¯ã‚»ã‚¹
    - ID: rstudio, PASSWORD: rstudio

## pilotç¬¬1å¼¾ã®å†ç¾ãƒ¡ãƒ¢

### GitHubã‹ã‚‰ãƒªãƒã‚¸ãƒˆãƒªã‚’zipã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

```{R}
zip_url <- "https://github.com/RConsortium/submissions-pilot1/archive/refs/heads/main.zip"
name <- "submissions-pilot1.zip"
download.file(zip_url, dest = name, mode = "wb")
unzip(name)
```

- è§£å‡ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«å†…ã® pilot1wrapper.proj é–‹ã

## pilotç¬¬1å¼¾ã®å†ç¾ãƒ¡ãƒ¢

### å®Ÿè¡Œç’°å¢ƒã®å¾©å…ƒ

```{R}
renv::restore()
devtools::load_all()  # inst/startup.R ã‚’å®Ÿè¡Œ
```

- vignettes/adrg-prepare.Rmd ã® Dry run ã¨ã„ã†ç« ã‚’å®Ÿè¡Œã— `pilot1wrappers` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

## pilotç¬¬1å¼¾ã®å†ç¾ãƒ¡ãƒ¢

### çµæœã®ç¢ºèª

- adam ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ define.xml ã‚„ å„ç¨® xpt ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹
- è§£æçµæœã¯ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ
    - tlf-primary.Rmd
    - tlf-kmplot.Rmd
    - tlf-efficacy.Rmd
    - tlf-demographic.Rmd

## pilot submission to PMDAã‚‚ã‚ã‚‹

- [GitHub](https://github.com/RConsortium/pilot1-to-pmda-submission)
    - æ—¥æœ¬ã®è¦åˆ¶å½“å±€PMDAã¸ã®ç”³è«‹ã‚’ç›®æŒ‡ã—ã¦ã‚‹ï¼Ÿ
    - 2022å¹´4æœˆä»¥é™å‹•ããŒãªãã€å½“åˆ†å…ˆã®è©±ã«...ï¼Ÿ

å°‘ã—ã§ã‚‚è²¢çŒ®ã—ãŸã„ã‘ã©ã€ã©ã†ã™ã‚Œã°ï¼Ÿæ•™ãˆã¦ãã ã•ã„ï¼

# ã¾ã¨ã‚

## æˆ‘ã€…ã¯ä½•ãŒã§ãã‚‹ã®ã‹ï¼Ÿ

- è‰ã®æ ¹é‹å‹•
    - SASãƒ¦ãƒ¼ã‚¶ã‚’å·»ãè¾¼ã¿ã€Rä¾¿åˆ©ã‹ã‚‚ã¨æ€ã£ã¦ã‚‚ã‚‰ã†
    - å¤–è³‡ç³»è£½è–¬ã§ã¯ä½¿ã„å§‹ã‚ã¦ã‚‹ã‚‰ã—ã„
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£, pilot submissionã‚’ã‚¦ã‚©ãƒƒãƒ
    - FDAå‘ã‘ã¯é †èª¿ãã†
    - PMDAå‘ã‘ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã©ã†ã«ã‹è²¢çŒ®ã™ã‚‹

æ‰¿èªç”³è«‹ã§Rã‚’ä½¿ã†ãŸã‚ã®è­°è«–ãŒæ´»ç™ºã«ãªã£ã¦ããŸ  
æ—¥æœ¬ã§ã‚‚ã‚‚ã£ã¨ç››ã‚Šä¸Šã’ãŸã„ï¼

# EnjoyğŸ˜†

# ç™ºè¡¨ã¯ã“ã“ã¾ã§

# å‚è€ƒæ–‡çŒ®ãƒ»ãƒªãƒ³ã‚¯é›†

## å…¨èˆ¬

- [R for Clinical Study Reports & Submission](https://www.youtube.com/watch?v=RBVqKi3FV30)
    - [slides](https://r4csr.org/slides/r4csr-rstudio.html)
- [Breaking boundaries through open-source collaboration](https://www.youtube.com/watch?v=APMDOS4v9Hk)
- [Open source projects from Roche accelerating data science](https://codecollaboration.org/opensource/)

## R Consortium Pilot Submission

- [Overall](https://rconsortium.github.io/submissions-wg/pilot-overall.html)
- [R pilot submissions to FDA](https://www.youtube.com/watch?v=_nToEBDkEX8)
- [Using R in Regulatory Review](https://www.youtube.com/watch?v=dtdd_jc1ybw)

## ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ»ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚°ãƒ«ãƒ¼ãƒ—

- [R consortium](https://www.r-consortium.org/)
- [Pharmaverse](https://pharmaverse.org/)
    - [Pharmaverse Slack](https://pharmaverse.org/support/)
- [R/Pharma](https://rinpharma.com/)
    - [Youtube](https://www.youtube.com/@RinPharma)
- [R Validation Hub](https://www.pharmar.org/)

## å®Ÿå‹™

- [R for Clinical Study Reports and Submission](https://r4csr.org/)
- [Workshop@R/Pharma 2022](https://github.com/pharmaverse/r-pharma2022)

## å¤–è³‡ç³»è£½è–¬ä¼æ¥­ã®Ræ´»ç”¨æˆ¦ç•¥

- [Posit: Open source in pharma from five perspectives](https://posit.co/blog/open-source-in-pharma-from-five-perspectives/)
- [Posit: R packages and Shiny for FDA clinical trial submissions](https://posit.co/blog/fda-shiny-r-package-submissions/)
- [Janssen](https://www.youtube.com/watch?v=C2Suw5Trh0A)
- [AZ](https://www.rstudio.com/blog/building-a-community-in-the-pharmaceutical-industry/)
- [GSK](https://www.youtube.com/watch?v=J3Tgn-bDHmE)

## ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ã‚¦ã‚§ãƒ“ãƒŠãƒ¼

- [CDISC](https://www.cdisc.org/events)
- [R consortium](https://www.r-consortium.org/webinars)
